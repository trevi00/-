## 쉘과 커널
1. 쉘 : 
	- 사용자와 시스템 간의 인터페이스
	- 기능 : 명령 해석, 스크립트 실행, 사용자 환경 설정
	- 명령어 : echo, env, printenv (환경변수 확인)
2. 커널 :
	- OS의 핵심으로 하드웨어 제어, 프로세스 관리, 메모리 관리
	- 기능 : 프로세스 생성/종료, 메모리 할당, 파일 시스템 관리

## 프로세스와 스레드
- 스레드는 하나의 프로세스 내에서 자원을 공유하며 동시에 실행되는 흐름이다.
- 스레드는 프로세스 내에서 주소공간을 공유하며 독립적인 실행 스택을 가진다.
- 디스패치 : 프로세스가 준비 상태에서 프로세서가 배당되어 실행 상태로 변화하는 것.
- 프로세스 제어 불록 : 프로세스 식별자, 프로세스 상태 등의 정보로 구성
- ContextSwitching : 이전 프로세스의 상태 레지스터 내용을 보관하고 다른 프로세스와 레지스터를 적재하는 과정.
### 멀티 프로세싱
> 컴퓨터는 한번에 하나만 가능해서 기아현상이 일어난다.
#### 문맥교환(Context Switching)
>실제 하고자 하는 일
>A B C D
>
>**multitasking**
>abcd abcd abcd abcd
>
> **Context Switching**
>a|b|c|d|a|b|c|d|a|b|c|d|a|b|c|d
>CPU가 한 프로세스의 상태를 저장하고 다른 프로세스를 실행하도록 전환하는 작업

### 프로세스 상태 전이
PCB(Process Control Block)에 저장 : 프로세스 식별자, 상태 등 저장
#### 프로세스 상태
- 준비(Ready) : 실행준비가 완료된 상태, CPU 할당 대기
- 실행(Running) : CPU에서 실행중인 상태
- 대기(Blocked) : 특정 이벤트(입출력 등) 대기 중인 상태
- 종료(Exit) : 프로세스 실행이 완료된 상태
#### 스케줄링 알고리즘
- FIFO(First In First Out, FCFS) : 먼저 도착한 프로세스를 먼저 처리
- SJF(Shortest Job First) : 
	- 실행 시간이 가장 짧은 프로세스를 우선 처리
	- 기아 현상 발생 가능
- HRN(Highest Response-ratio Next) :
	- SJF의 기아 문제 해결
	- 대기 시간이 길어질수록 우선순위 상승
- RR(Round Robin) : 
	- 고정된 시간 단위로 프로세스를 순차적으로 처리
#### 교착상태(Deadlock)
- 발생 조건 (Coffman 조건))
	- 상호 배제(Mutual Exclusion)
	- 점유와 대기(Hold and Wait)
	- 비선점(Non-preemption)
	- 환형 대기(CirCular Wait)
- 해결 방법
	- Avoidance :
		- 자원 할당 전 시스템이 안전 상태를 유지하는 지 확인 (은행가 알고리즘)
	- Detection and Recovery :
		- 교착 상태 발생 후 감지하고 해결
	- Prevention : 
		- 교착 상태의 조건 중 하나를 제거하여 발생 방지
- 프로세스 제어 블록(PCB)와 문맥 교환(Context Switching) : 
	- PCB : 프로세스의 식별자, 상태, 카운터, 레지스터 등의 정보를 포함
	- 문맥 교환 : 실행 중인 프로세스의 상태를 저장하고 다른 프로세스의 상태를 복구하는 과정으로, 오버헤드가 발생할 수 있음
- 상호 배제(Mutual Exclusion) 기법
	- 세마포어(Semaphore) :
		- Proberen(S), Verhogen(S) 연산을 사용하여 임계 구역 접근을 제어
	- Peterson 알고리즘 : 
		- 두 프로세스 간의 상호 배제를 보장하는 알고리즘
	- Dekker 알고리즘, Lamport 알고리즘 :
		- 다중 프로세스의 상호 배제를 위한 기법들

## 페이지와 세그멘테이션
#### 페이지
프로세스의 메모리를 고정된 크기로 나누어 관리하는 방식으로, 책의 '페이지'에서 나온 용어이다.
> 내부 단편화
※ 페이지 크기 감소의 영향 : 
- 기억 장소 이용 효율 증가
- 내부 단편화 감소
- 페이지 맵 테이블의 크기는 증가
#### 세그멘테이션
프로세스를 논리적인 단위로 구분하여 가변 크기로 메모리를 관리하는 방식으로, '부분', '조각'을 의미한다.
> 외부 단편화

### 기억장치 배치 전략
#### First Fit
위에서부터 차례대로 내려오며 수용할 수 있는 첫번째 빈공간에 배치
#### Best Fit
수용할 수 있는 공간들 중 내부 단편화가 가장 적은 공간을 찾아서 배치
#### Worst Fit
수용할 수 있는 공간들 중 내부 단편화가 가장 큰 공간을 찾아 배치

### 페이지 교체 알고리즘
- FIFO (First-In-First-Out) : 가장 먼저 들어온 페이지를 먼저 교체
- LRU (Least Recently Used) : 가장 오랫동안 사용되지 않은 페이지를 교체
- Optimal (OPT) : 앞으로 가장 오래 사용되지 않을 페이지를 교체
- LFU (Least FreQuently Used) : 가장 적게 사용된 페이지를 교체
### 페이지 결함 (Page Fault)
- LRU, FIFO 등 페이지 교체 알고리즘에 따라 참조 순서에 따른 페이지 결함 횟수 계산
- ex) 1, 2, 3, 1, 2, 4, 1, 2, 5 참조 시, LRU 알고리즘으로 8회 결함 발생

#### 가상메모리에서 페이지 폴트와 교체 과정
- 유효 비트 :
	- 0 : 주 기억장치에 있음
	- 1 :
		- 페이지 부재 : LRU, FIFO등 페이지 교체 알고리즘 사용
		- 보조기억장치의 SWAP에 있음

## Thrashing
본연의 일은 못하고 페이지 폴트가 나서, 입출력에만 집중하는 것
즉, 일반적으로 프로세스 수행에 보내는 시간보다 페이지 교환에 보내는 시간이 더 크면 일어난다.
- 교환 시간이 프로세스 실행 시간보다 클 때 발생
- 해결 방법 : 충분한 프레임 수 제공, 워킹셋(Working Set) 개념 활용
- Working Set : 프로세스가 일정 시간 동안 자주 참조하는 페이지들의 집합으로, 스레싱 방지에 효과적
#### Working set (Thrashing 해결 방법)
시간, 공간, 지역성
위 세가지를 고려해서 필효한 것을 물리 메모리에 보존

#### 세그먼트 기법
- 논리 주소는 세그먼트 번호와 오프셋으로 구성
- 물리 주소 = 시작 주소 + 오프셋
- EX) 세그먼트 2의 시작 주소가 222일 때, 논리 주소(2, 176)은 물리 주소 398에 해당함(222 + 176)

#### 지역성 (Locality)
- 시간 지역성(Temporal Locality) :
	- 최근에 참조한 데이터를 다시 참조하는 특성
	- 반복, 스택, 부프로그램의 예시가 있다.
- 공간 지역성(Spatial Locality) :
	- 인접한 주소를 연속적으로 참조하는 특성
	- 프로세스가 어떤 페이지를 참조했다면 이후 가상주소 공간상 그 페이지와 인접한 페이지들을 참조할 가능성이 높음을 의미한다.
